import{A as l,a as u}from"./index-81273894.js";function f(o){return l({url:`/profiles/${o}`,method:"GET"}).then(t=>t.profile)}function i(o){return l({url:`/profiles/${o}/follow`,method:"POST"}).then(t=>t.profile)}function p(o){return l({url:`/profiles/${o}/follow`,method:"DELETE"}).then(t=>t.profile)}const s={get:f,follow:i,unfollow:p},e={root:["profile"],username:o=>[...e.root,o]};function w(o,t){return u({mutationFn:()=>s.follow(t.value),onMutate:async()=>{await o.cancelQueries(e.username(t));const a=o.getQueryData(e.username(t));return o.setQueryData(e.username(t),r=>({...r,following:!0})),{prevData:a}},onError:(a,r,n)=>{n&&o.setQueryData(e.username(t),n.prevData)},onSettled:()=>{o.invalidateQueries(e.username(t))}})}function D(o,t){return u({mutationFn:()=>s.unfollow(t.value),onMutate:async()=>{await o.cancelQueries(e.username(t));const a=o.getQueryData(e.username(t));return o.setQueryData(e.username(t),r=>({...r,following:!1})),{prevData:a}},onError:(a,r,n)=>{n&&o.setQueryData(e.username(t),n.prevData)},onSettled:()=>{o.invalidateQueries(e.username(t))}})}export{D as a,s as b,e as p,w as u};
